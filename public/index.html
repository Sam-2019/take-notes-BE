<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="stylesheet" href="bootstrap.css" />

    <!-- 1) Load D3.js and billboard.js separately -->
    <!-- Load D3 -->
    <script src="d3.v5.min.js"></script>

    <!-- Load billboard.js with base(or theme) style -->
    <link rel="stylesheet" href="billboard.css" />
    <script src="billboard.js"></script>
    <title>Create Poll</title>
  </head>
  <body>
    <div class="container col-md-5">
      <div class="card-group mt-3">
        <div class="card shadow p-2 border-0">
          <div class="card-body">
            <form id="voteform" method="post" action="/post">
              <h5 class="card-title">Question</h5>
              <input
                id="question"
                name="question"
                class="form-control form-control-lg mt-3"
                placeholder="Share your thought"
                required
              />

              <h6 class="card-title mt-3 ">Options</h6>

              <input
                class="form-control mt-3 "
                id="option1"
                name="option1"
                placeholder="Option 1"
                required
              />

              <input
                class="form-control mt-3 mb-3"
                id="option2"
                name="option2"
                placeholder="Option 2"
                required
              />

              <input
                class="form-control mt-3"
                id="option3"
                name="option3"
                placeholder="Option 3"
                required
              />
              <input type="submit" value="Post" class="btn btn-primary mt-3" />
            </form>

            <a href="/view" class="btn btn-primary mt-2">View</a>
            <a href="/view/yeah" class="btn btn-primary mt-2"
              >View (sort by date)</a
            >

     
          </div>
 
          <div id="chartContainer"></div>
        </div>
      </div>
    </div>

    <script src="jquery-3.3.1.min.js"></script>
    <script src="bootstrap.bundle.js"></script>
    <script src="canvasjs.min.js"></script>

    <script>
      fetch("http://localhost:4010/view")
        .then(res => res.json())
        .then(data => {
          console.log(data);
          const questions = data.questions;
          const totalQuestions = questions.length;

          let showData = {
            question: 5,
            option1: 2,
            option2: 3,
            option3: 10
          }


          let dataPoints = [
            { label: 'question', y: showData.question },
            { label: 'option1', y: showData.option1 },
            { label: 'option2', y: showData.option2 },
            { label: 'option3', y: showData.option3 }
        ];

          var chart = new CanvasJS.Chart("chartContainer", {
        animationEnabled: true,
        title: {
          text: "Email Categories",
          horizontalAlign: "right"
        },
        data: [
          {
            type: "doughnut",

            dataPoints: dataPoints
          }
        ]
      });
      chart.render();

        });


    </script>



  </body>
</html>
